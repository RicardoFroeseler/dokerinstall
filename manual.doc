REMOVENDO O DOCKER
# 1. Parar e remover o container Jellyfin (se existir)
docker stop jellyfin 2>/dev/null || true
docker rm jellyfin 2>/dev/null || true

# 2. Parar e remover todos os containers Docker
docker stop $(docker ps -aq) 2>/dev/null || true
docker rm $(docker ps -aq) 2>/dev/null || true

# 3. Remover todas as imagens Docker
docker rmi $(docker images -q) 2>/dev/null || true

# 4. Remover todos os volumes Docker
docker volume rm $(docker volume ls -q) 2>/dev/null || true

# 5. Desinstalar pacotes Docker do APT
sudo apt remove --purge -y docker-ce docker-ce-cli containerd.io docker-engine docker.io
sudo apt autoremove -y

# 6. Apagar dados do Docker
sudo rm -rf /var/lib/docker /var/lib/containerd

# 7. Remover reposit√≥rio e chave do Docker
sudo rm -f /etc/apt/sources.list.d/docker.list
sudo rm -f /usr/share/keyrings/docker-archive-keyring.gpg

# 8. Apagar toda a pasta de dados do Jellyfin (configura√ß√µes, cache, plugins e m√≠dia)
rm -rf ~/jellyfin


-----------------------------------------------------
REMOVENDO O JELLYFIN
# 1. Parar e desabilitar o servi√ßo Jellyfin (se instalado via APT)
sudo systemctl stop jellyfin
sudo systemctl disable jellyfin

# 2. Desinstalar pacotes Jellyfin
sudo apt remove --purge -y jellyfin jellyfin-server jellyfin-web
sudo apt autoremove -y

# 3. Apagar dados de configura√ß√£o e bibliotecas do Jellyfin
sudo rm -rf /var/lib/jellyfin
sudo rm -rf /etc/jellyfin
rm -rf ~/jellyfin

# 4. (Opcional) Se voc√™ tiver um usu√°rio chamado jellyfin, remov√™-lo
sudo userdel jellyfin 2>/dev/null || true


-----------------------------------------------------
CONFERENCIA

docker ps -a
Se n√£o aparecer nenhum container, est√° limpo.

docker images
Deve mostrar apenas a imagem <none> ou nenhuma refer√™ncia a jellyfin.

docker volume ls
N√£o deve aparecer nenhum volume, especialmente nada como jellyfin_*.

dpkg -l | grep -E "docker|containerd|jellyfin"
N√£o deve retornar linhas para docker-ce, docker.io, containerd.io ou qualquer pacote jellyfin.

ls ~/jellyfin
Se tudo foi removido, deve responder:

ls: cannot access '/home/ricardo/jellyfin': No such file or directory
ou simplesmente n√£o mostrar nada.

-----------------------------------------------------
INSTALA√á√ÉO

1. Atualizar o sistema
sudo apt update && sudo apt upgrade -y


2. Instalar o Docker Engine
# Depend√™ncias
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common gnupg

# Adicionar chave GPG e reposit√≥rio oficial
curl -fsSL https://download.docker.com/linux/ubuntu/gpg \
  | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] \
   https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" \
  | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Instalar Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io

# Permitir usar Docker sem sudo
sudo usermod -aG docker $USER

COMANDO COMPLETO
---
sudo apt update && sudo apt install -y apt-transport-https ca-certificates curl software-properties-common gnupg && \
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg && \
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null && \
sudo apt update && sudo apt install -y docker-ce docker-ce-cli containerd.io && \
sudo usermod -aG docker $USER
---

3. Criar diret√≥rios limpos para o Jellyfin
mkdir -p ~/jellyfin/{config,cache,media/{Filmes,S√©ries,Animes},config/plugins}


4. Subir o Jellyfin em Docker
mkdir -p ~/jellyfin/{config,cache,config/plugins,media/{Filmes,S√©ries,Animes}} && \
docker run -d --name jellyfin \
  -p 8096:8096 \
  -v ~/jellyfin/config:/config \
  -v ~/jellyfin/cache:/cache \
  -v ~/jellyfin/media:/media \
  jellyfin/jellyfin:latest


5. Completar o setup inicial pelo navegador
Abra o navegador na VM: http://localhost:8096

Siga o wizard:

Escolha idioma

Crie usu√°rio admin e senha

Adicione bibliotecas apontando para /media/Filmes, /media/S√©ries, /media/Animes

Conclua

6. Instalar plugin ‚ÄúCustom JavaScript‚Äù (para injetar CSS + um bot√£o)
No Dashboard ‚Üí Plugins ‚Üí aba Cat√°logo, clique no √≠cone de engrenagem (‚öôÔ∏è) no canto superior direito.

Adicione este reposit√≥rio:

Nome: @johnpc (Custom Javascript)

URL:
https://raw.githubusercontent.com/johnpc/jellyfin-plugin-custom-javascript/refs/heads/main/manifest.json
``` :contentReference[oaicite:1]{index=1}

Salve, pesquise por Custom Javascript, clique em Instalar e depois em Reiniciar Jellyfin.

Ap√≥s o servidor subir, v√° em Dashboard ‚Üí Plugins ‚Üí Custom JavaScript e cole este c√≥digo:
window.addEventListener("DOMContentLoaded", () => {
  // injeta o CSS
  const style = document.createElement("style");
  style.textContent = `
    .support-button {
      color: white;
      background-color: #0077cc;
      padding: 5px 10px;
      margin-right: 10px;
      border-radius: 5px;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
    }
    .support-button:hover {
      background-color: #005fa3;
    }
  `;
  document.head.appendChild(style);

  // cria o bot√£o e adiciona no header
  const header = document.querySelector(".headerRight");
  if (header) {
    const btn = document.createElement("a");
    btn.textContent = "üõ† Suporte";
    btn.href = "https://materprint.com.br";
    btn.target = "_blank";
    btn.className = "support-button";
    header.prepend(btn);
  }
});
